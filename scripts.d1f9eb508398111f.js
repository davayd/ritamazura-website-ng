!function(s,a){var n={sliders:[],OPTIMIZATION_ACCEPTED:1,OPTIMIZATION_WAS_CONSTRAINED:2};function u(t,e){var i=this;this.image=new Image,this.loaded=!1,this.image.onload=function(){i.loaded=!0,e._onLoaded()},this.image.src=t.src,this.image.alt=t.alt||"",this.label=t.label||!1,this.credit=t.credit||!1}function p(t){if(t.naturalWidth&&t.naturalHeight)return{width:t.naturalWidth,height:t.naturalHeight};var e=new Image;return e.src=t.src,{width:e.width,height:e.height}}function g(t){return{width:p(t).width,height:p(t).height,aspect:function(){return this.width/this.height}}}function f(t,e){t.classList?t.classList.add(e):t.className+=" "+e}function d(t,e){t.className=t.className.replace(/(\S+)\s*/g,function(i,r){return r===e?"":i}).replace(/^\s+/,"")}function m(t){return a.getComputedStyle?{width:parseInt(getComputedStyle(t).width,10),height:parseInt(getComputedStyle(t).height,10)}:(w=t.getBoundingClientRect().right-t.getBoundingClientRect().left,h=t.getBoundingClientRect().bottom-t.getBoundingClientRect().top,{width:parseInt(w,10)||0,height:parseInt(h,10)||0})}var P={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0};function E(t){return"string"!=typeof t?Boolean(t):!("false"===t||""===t)}function v(t,e,i){var r;for(r in this.selector=t,this.options={animate:!0,showLabels:!0,showCredits:!0,makeResponsive:!0,startingPosition:"50%",mode:"horizontal",callback:null},this.options)r in i&&(this.options[r]=r in P?E(i[r]):i[r]);2==e.length?(this.imgBefore=new u(e[0],this),this.imgAfter=new u(e[1],this)):console.warn("The images parameter takes two Image objects."),this.options.showCredits=!(!this.imgBefore.credit&&!this.imgAfter.credit)}v.prototype={updateSlider:function(t,e){var i,r;i=(i="vertical"===this.options.mode?function C(t,e){if("string"==typeof e||"number"==typeof e)topPercent=parseInt(e,10);else{var i=t.getBoundingClientRect(),r={top:i.top+s.body.scrollTop+s.documentElement.scrollTop,left:i.left+s.body.scrollLeft+s.documentElement.scrollLeft},l=t.offsetHeight,o=function y(t){return t.pageY?t.pageY:t.touches?t.touches[0].pageY:t.clientY+s.body.scrollTop+s.documentElement.scrollTop}(e);topPercent=(o-r.top)/l*100}return topPercent}(this.slider,t):function I(t,e){if("string"==typeof e||"number"==typeof e)leftPercent=parseInt(e,10);else{var i=t.getBoundingClientRect(),r={top:i.top+s.body.scrollTop+s.documentElement.scrollTop,left:i.left+s.body.scrollLeft+s.documentElement.scrollLeft},l=t.offsetWidth,o=function A(t){return t.pageX?t.pageX:t.touches?t.touches[0].pageX:t.clientX+s.body.scrollLeft+s.documentElement.scrollLeft}(e);leftPercent=(o-r.left)/l*100}return leftPercent}(this.slider,t)).toFixed(2)+"%",leftPercentNum=parseFloat(i),r=100-leftPercentNum+"%",leftPercentNum>0&&leftPercentNum<100&&(d(this.handle,"transition"),d(this.rightImage,"transition"),d(this.leftImage,"transition"),this.options.animate&&e&&(f(this.handle,"transition"),f(this.leftImage,"transition"),f(this.rightImage,"transition")),"vertical"===this.options.mode?(this.handle.style.top=i,this.leftImage.style.height=i,this.rightImage.style.height=r):(this.handle.style.left=i,this.leftImage.style.width=i,this.rightImage.style.width=r),this.sliderPosition=i)},getPosition:function(){return this.sliderPosition},displayLabel:function(t,e){label=s.createElement("div"),label.className="jx-label",label.setAttribute("tabindex",0),function b(t,e){s.body.textContent?t.textContent=e:t.innerText=e}(label,e),t.appendChild(label)},setStartingPosition:function(t){this.options.startingPosition=t},checkImages:function(){return g(this.imgBefore.image).aspect()==g(this.imgAfter.image).aspect()},calculateDims:function(t,e){var i=g(this.imgBefore.image).aspect();return t?e=t/i:e&&(t=e*i),{width:t,height:e,ratio:i}},responsivizeIframe:function(t){return t.height<a.innerHeight?t.ratio>=1&&(this.wrapper.style.paddingTop=parseInt((a.innerHeight-t.height)/2)+"px"):t.height>a.innerHeight&&(t=this.calculateDims(0,a.innerHeight),this.wrapper.style.paddingLeft=parseInt((a.innerWidth-t.width)/2)+"px"),this.options.showCredits&&(t.height-=13),t},setWrapperDimensions:function(){var t=m(this.wrapper).width,e=m(this.wrapper).height,i=this.calculateDims(t,e);a.location!==a.parent.location&&!this.options.makeResponsive&&(i=this.responsivizeIframe(i)),this.wrapper.style.height=parseInt(i.height)+"px",this.wrapper.style.width=parseInt(i.width)+"px"},optimizeWrapper:function(t){var e=n.OPTIMIZATION_ACCEPTED;return this.imgBefore.image.naturalWidth>=t&&this.imgAfter.image.naturalWidth>=t?(this.wrapper.style.width=t+"px",e=n.OPTIMIZATION_WAS_CONSTRAINED):this.wrapper.style.width=this.imgAfter.image.naturalWidth<t?this.imgAfter.image.naturalWidth+"px":this.imgBefore.image.naturalWidth+"px",this.setWrapperDimensions(),e},_onLoaded:function(){this.imgBefore&&!0===this.imgBefore.loaded&&this.imgAfter&&!0===this.imgAfter.loaded&&(this.wrapper=s.querySelector(this.selector),f(this.wrapper,"juxtapose"),this.wrapper.style.width=p(this.imgBefore.image).width,this.setWrapperDimensions(),this.slider=s.createElement("div"),this.slider.className="jx-slider",this.wrapper.appendChild(this.slider),"horizontal"!=this.options.mode&&f(this.slider,this.options.mode),this.handle=s.createElement("div"),this.handle.className="jx-handle",this.rightImage=s.createElement("div"),this.rightImage.className="jx-image jx-right",this.rightImage.appendChild(this.imgAfter.image),this.leftImage=s.createElement("div"),this.leftImage.className="jx-image jx-left",this.leftImage.appendChild(this.imgBefore.image),this.slider.appendChild(this.handle),this.slider.appendChild(this.leftImage),this.slider.appendChild(this.rightImage),this.leftArrow=s.createElement("div"),this.rightArrow=s.createElement("div"),this.control=s.createElement("div"),this.controller=s.createElement("div"),this.leftArrow.className="jx-arrow jx-left",this.rightArrow.className="jx-arrow jx-right",this.control.className="jx-control",this.controller.className="jx-controller",this.controller.setAttribute("tabindex",0),this.controller.setAttribute("role","slider"),this.controller.setAttribute("aria-label","Slider that separates before and after photos"),this.controller.setAttribute("aria-valuenow",50),this.controller.setAttribute("aria-valuemin",0),this.controller.setAttribute("aria-valuemax",100),this.handle.appendChild(this.leftArrow),this.handle.appendChild(this.control),this.handle.appendChild(this.rightArrow),this.control.appendChild(this.controller),this._init())},_init:function(){!1===this.checkImages()&&console.warn(this,"Check that the two images have the same aspect ratio for the slider to work correctly."),this.updateSlider(this.options.startingPosition,!1),!0===this.options.showLabels&&(this.imgBefore.label&&this.displayLabel(this.leftImage,this.imgBefore.label),this.imgAfter.label&&this.displayLabel(this.rightImage,this.imgAfter.label));var t=this;this.slider.addEventListener("mousedown",function(e){(e=e||a.event).preventDefault(),t.updateSlider(e,!0),animate=!0,this.addEventListener("mousemove",function(i){(i=i||a.event).preventDefault(),animate&&t.updateSlider(i,!1)}),this.addEventListener("mouseup",function(i){(i=i||a.event).preventDefault(),i.stopPropagation(),this.removeEventListener("mouseup",arguments.callee),animate=!1})}),this.slider.addEventListener("touchstart",function(e){(e=e||a.event).preventDefault(),e.stopPropagation(),t.updateSlider(e,!0),this.addEventListener("touchmove",function(i){(i=i||a.event).preventDefault(),i.stopPropagation(),t.updateSlider(event,!1)})}),this.handle.addEventListener("keydown",function(e){var i=(e=e||a.event).which||e.keyCode,r=parseFloat(this.style.left);if(37==i){r-=1;var l=parseFloat(this.style.left)-1;t.updateSlider(l,!1),t.controller.setAttribute("aria-valuenow",r)}if(39==i){r+=1;var o=parseFloat(this.style.left)+1;t.updateSlider(o,!1),t.controller.setAttribute("aria-valuenow",r)}}),this.leftImage.addEventListener("keydown",function(e){var i=e.which||e.keyCode;(13==i||32==i)&&(t.updateSlider("90%",!0),t.controller.setAttribute("aria-valuenow",90))}),this.rightImage.addEventListener("keydown",function(e){var i=e.which||e.keyCode;(13==i||32==i)&&(t.updateSlider("10%",!0),t.controller.setAttribute("aria-valuenow",10))}),n.sliders.push(this),this.options.callback&&"function"==typeof this.options.callback&&this.options.callback(this)}},n.makeSlider=function(t,e){void 0===e&&(e=n.sliders.length);var i=t,r=i.querySelectorAll("img"),l={};i.getAttribute("data-animate")&&(l.animate=i.getAttribute("data-animate")),i.getAttribute("data-showlabels")&&(l.showLabels=i.getAttribute("data-showlabels")),i.getAttribute("data-showcredits")&&(l.showCredits=i.getAttribute("data-showcredits")),i.getAttribute("data-startingposition")&&(l.startingPosition=i.getAttribute("data-startingposition")),i.getAttribute("data-mode")&&(l.mode=i.getAttribute("data-mode")),i.getAttribute("data-makeresponsive")&&(l.mode=i.getAttribute("data-makeresponsive")),specificClass="juxtapose-"+e,f(t,specificClass),selector="."+specificClass,i.innerHTML?i.innerHTML="":i.innerText="",slider=new n.JXSlider(selector,[{src:r[0].src,label:r[0].getAttribute("data-label"),credit:r[0].getAttribute("data-credit"),alt:r[0].alt},{src:r[1].src,label:r[1].getAttribute("data-label"),credit:r[1].getAttribute("data-credit"),alt:r[1].alt}],l)},n.scanPage=function(){for(var t=s.querySelectorAll(".juxtapose"),e=0;e<t.length;e++)n.makeSlider(t[e],e)},n.JXSlider=v,a.juxtapose=n,n.scanPage()}(document,window);