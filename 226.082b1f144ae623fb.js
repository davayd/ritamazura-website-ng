"use strict";(self.webpackChunkritamazura_website_ng=self.webpackChunkritamazura_website_ng||[]).push([[226],{4226:(A,f,s)=>{s.r(f),s.d(f,{RetouchSessionModule:()=>S});var p=s(6895),E=s(9541),l=s(7579),u=s(8421),r=s(9751),m=s(5577),d=s(1144),a=s(576),P=s(3268);const L=["addListener","removeListener"],F=["addEventListener","removeEventListener"],Z=["on","off"];function I(n,i,e,o){if((0,a.m)(e)&&(o=e,e=void 0),o)return I(n,i,e).pipe((0,P.Z)(o));const[c,_]=function D(n){return(0,a.m)(n.addEventListener)&&(0,a.m)(n.removeEventListener)}(n)?F.map(h=>O=>n[h](i,O,e)):function U(n){return(0,a.m)(n.addListener)&&(0,a.m)(n.removeListener)}(n)?L.map(y(n,i)):function W(n){return(0,a.m)(n.on)&&(0,a.m)(n.off)}(n)?Z.map(y(n,i)):[];if(!c&&(0,d.z)(n))return(0,m.z)(h=>I(h,i,e))((0,u.Xf)(n));if(!c)throw new TypeError("Invalid event target");return new r.y(h=>{const O=(...R)=>h.next(1<R.length?R:R[0]);return c(O),()=>_(O)})}function y(n,i){return e=>o=>n[e](i,o)}var T=s(2722),H=s(5243),C=s(3135),t=s(8256),J=s(7201),z=s(7117);class g{transform(i){if(!i)return"";const o=new RegExp("^[0-9]{1,2}(?:(?:.[0-9]{1,2})?)\\s([\u0430-\u044f\u0410-\u042fa-zA-Z\\s_?]*)(?:-(?:desktop|mobile).webp)$","i").exec(i);return o?o[1]:i}static#t=this.\u0275fac=function(e){return new(e||g)};static#e=this.\u0275pipe=t.Yjl({name:"photoAuthor",type:g,pure:!0})}function M(n,i){1&n&&(t.TgZ(0,"h3",8),t._uU(1,' \u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0441 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0443\u0440\u0441\u0430 \u043f\u043e \u0440\u0435\u0442\u0443\u0448\u0438 \u043e\u0442 \u0410\u043d\u0430\u0441\u0442\u0430\u0441\u0438\u0438 \u0412\u043e\u0440\u043e\u043d\u0446\u043e\u0432\u043e\u0439 "\u0420\u0435\u0442\u0430\u0447\u0443\u0445\u0435\u0440\u0430\u0447\u0443" '),t.qZA())}function Q(n,i){if(1&n&&(t.TgZ(0,"figcaption",13)(1,"span",14),t._uU(2,"Ph."),t.qZA(),t.TgZ(3,"span",15),t._uU(4),t.ALo(5,"photoAuthor"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(t.lcZ(5,1,e[0].label))}}const b=function(n){return{width:n}};function Y(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"figure")(2,"div",9),t._UZ(3,"img",10)(4,"img",11),t.qZA(),t.YNc(5,Q,6,3,"figcaption",12),t.qZA(),t.BQk()),2&n){const e=i.$implicit,o=t.oxw(2);t.xp6(2),t.Q6J("ngStyle",t.VKq(6,b,o.innerWidth+"px")),t.xp6(1),t.Q6J("src",e[1].url,t.LSH),t.uIk("alt",e[1].label),t.xp6(1),t.Q6J("src",e[0].url,t.LSH),t.uIk("alt",e[0].label),t.xp6(1),t.Q6J("ngIf",!o.isCourseFolder)}}function $(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",3),t._uU(2),t.qZA(),t.YNc(3,M,2,0,"h3",4),t.TgZ(4,"div",5),t.YNc(5,Y,6,8,"ng-container",6),t.qZA(),t._UZ(6,"app-paginator",7),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.currentSession.title," "),t.xp6(1),t.Q6J("ngIf",e.isCourseFolder),t.xp6(2),t.Q6J("ngForOf",e.currentSession.beforeAterterPhotos),t.xp6(1),t.Q6J("previousSession",e.previousSession)("nextSession",e.nextSession)}}function B(n,i){1&n&&t._uU(0," Not found ")}class v{constructor(i,e,o){this.activateRoute=i,this.applicationStateService=e,this.googleAnalyticsService=o,this.mainWrapper=null,this.innerWidth=0,this.isCourseFolder=!1,this.destroy$=new l.x}ngOnInit(){this.mainWrapper=document.getElementById("main-wrapper"),this.mainWrapper&&(this.innerWidth=this.mainWrapper.clientWidth-2*parseInt(getComputedStyle(this.mainWrapper).paddingLeft)),this.activateRoute.paramMap.pipe((0,T.R)(this.destroy$)).subscribe(i=>{const e=i.get("id");if(!e)return;const o=this.applicationStateService.retouchSessions.findIndex(c=>c.transliteratedUrl===e);o<0||(this.currentSession=this.applicationStateService.retouchSessions[o],this.previousSession=this.applicationStateService.retouchSessions[o-1],this.nextSession=this.applicationStateService.retouchSessions[o+1],setTimeout(()=>{juxtapose.scanPage()}),this.isCourseFolder="course"===this.activateRoute.snapshot.params.id||!1)}),I(document,"sliderUpdated").pipe((0,H.b)(200),(0,T.R)(this.destroy$)).subscribe(()=>{this.googleAnalyticsService.sendEvent(C.O.RETOUCH_SLIDER_TOUCHED)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}static#t=this.\u0275fac=function(e){return new(e||v)(t.Y36(E.gz),t.Y36(J.V),t.Y36(C.$))};static#e=this.\u0275cmp=t.Xpm({type:v,selectors:[["app-retouch-session"]],decls:4,vars:2,consts:[["id","main-wrapper",1,"container"],[4,"ngIf","ngIfElse"],["notFound",""],[1,"detail-title"],["class","text-center mb-6 text-xs",4,"ngIf"],[1,"flex","flex-col","gap-4","mb-4"],[4,"ngFor","ngForOf"],[3,"previousSession","nextSession"],[1,"text-center","mb-6","text-xs"],[1,"juxtapose","m-auto",3,"ngStyle"],["loading","lazy","data-label","before",3,"src"],["loading","lazy","data-label","after",3,"src"],["class","text-[10px] text-center text-slate-600 mt-1",4,"ngIf"],[1,"text-[10px]","text-center","text-slate-600","mt-1"],[1,"normal-case","tracking-tight","mr-1"],[1,"normal-case"]],template:function(e,o){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,$,7,5,"ng-container",1),t.YNc(2,B,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const c=t.MAs(3);t.xp6(1),t.Q6J("ngIf",o.currentSession)("ngIfElse",c)}},dependencies:[p.sg,p.O5,p.PC,z.J,g],changeDetection:0})}const N=[{path:"",component:v}];class x{static#t=this.\u0275fac=function(e){return new(e||x)};static#e=this.\u0275mod=t.oAB({type:x});static#n=this.\u0275inj=t.cJS({imports:[E.Bz.forChild(N),E.Bz]})}var j=s(3732);class S{static#t=this.\u0275fac=function(e){return new(e||S)};static#e=this.\u0275mod=t.oAB({type:S});static#n=this.\u0275inj=t.cJS({imports:[p.ez,x,j.U]})}},3135:(A,f,s)=>{s.d(f,{$:()=>u,O:()=>l});var p=s(8256),l=(()=>{return(r=l||(l={})).PHOTO_VIEWER_OPEN="PHOTO_VIEWER_OPEN",r.PHOTO_VIEWER_CLOSE="PHOTO_VIEWER_CLOSE",r.PHOTO_VIEWER_SWIPE="PHOTO_VIEWER_SWIPE",r.RETOUCH_SLIDER_TOUCHED="RETOUCH_SLIDER_TOUCHED",r.PAGINATOR_LEFT="PAGINATOR_LEFT",r.PAGINATOR_RIGHT="PAGINATOR_RIGHT",r.PAGE_PRICE_OPENED="PAGE_PRICE_OPENED",l;var r})();class u{sendEvent(m){gtag("event",m)}sendCustomEvent(m,d){gtag("event",m,d)}static#t=this.\u0275fac=function(d){return new(d||u)};static#e=this.\u0275prov=p.Yz7({token:u,factory:u.\u0275fac,providedIn:"root"})}}}]);