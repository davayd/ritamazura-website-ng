"use strict";(self.webpackChunkritamazura_website_ng=self.webpackChunkritamazura_website_ng||[]).push([[226],{4226:(w,v,o)=>{o.r(v),o.d(v,{RetouchSessionModule:()=>h});var c=o(6895),f=o(9541),A=o(7579),T=o(8421),Z=o(9751),C=o(5577),I=o(1144),r=o(576),F=o(3268);const R=["addListener","removeListener"],L=["addEventListener","removeEventListener"],U=["on","off"];function g(n,i,e,s){if((0,r.m)(e)&&(s=e,e=void 0),s)return g(n,i,e).pipe((0,F.Z)(s));const[u,P]=function z(n){return(0,r.m)(n.addEventListener)&&(0,r.m)(n.removeEventListener)}(n)?L.map(a=>d=>n[a](i,d,e)):function O(n){return(0,r.m)(n.addListener)&&(0,r.m)(n.removeListener)}(n)?R.map(S(n,i)):function J(n){return(0,r.m)(n.on)&&(0,r.m)(n.off)}(n)?U.map(S(n,i)):[];if(!u&&(0,I.z)(n))return(0,C.z)(a=>g(a,i,e))((0,T.Xf)(n));if(!u)throw new TypeError("Invalid event target");return new Z.y(a=>{const d=(...x)=>a.next(1<x.length?x:x[0]);return u(d),()=>P(d)})}function S(n,i){return e=>s=>n[e](i,s)}var E=o(2722),Q=o(5243),y=o(3135),t=o(8256),b=o(7201),W=o(7117);class p{transform(i){if(!i)return"";const s=new RegExp("^[0-9]{1,2}(?:(?:.[0-9]{1,2})?)\\s([\u0430-\u044f\u0410-\u042fa-zA-Z\\s_?]*)(?:-(?:desktop|mobile).webp)$","i").exec(i);return s?s[1]:i}static#t=this.\u0275fac=function(e){return new(e||p)};static#e=this.\u0275pipe=t.Yjl({name:"photoAuthor",type:p,pure:!0})}function Y(n,i){1&n&&(t.TgZ(0,"h3",8),t._uU(1,' \u0424\u043e\u0442\u043e\u0433\u0440\u0430\u0444\u0438\u0438 \u0441 \u043f\u0440\u043e\u0444\u0435\u0441\u0441\u0438\u043e\u043d\u0430\u043b\u044c\u043d\u043e\u0433\u043e \u043a\u0443\u0440\u0441\u0430 \u043f\u043e \u0440\u0435\u0442\u0443\u0448\u0438 \u043e\u0442 \u0410\u043d\u0430\u0441\u0442\u0430\u0441\u0438\u0438 \u0412\u043e\u0440\u043e\u043d\u0446\u043e\u0432\u043e\u0439 "\u0420\u0435\u0442\u0430\u0447\u0443\u0445\u0435\u0440\u0430\u0447\u0443" '),t.qZA())}function $(n,i){if(1&n&&(t.TgZ(0,"figcaption",13)(1,"span",14),t._uU(2,"Ph."),t.qZA(),t.TgZ(3,"span",15),t._uU(4),t.ALo(5,"photoAuthor"),t.qZA()()),2&n){const e=t.oxw().$implicit;t.xp6(4),t.Oqu(t.lcZ(5,1,e[0].label))}}const j=function(n){return{width:n}};function B(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"figure")(2,"div",9),t._UZ(3,"img",10)(4,"img",11),t.qZA(),t.YNc(5,$,6,3,"figcaption",12),t.qZA(),t.BQk()),2&n){const e=i.$implicit,s=t.oxw(2);t.xp6(2),t.Q6J("ngStyle",t.VKq(6,j,s.innerWidth+"px")),t.xp6(1),t.Q6J("src",e[1].url,t.LSH),t.uIk("alt",e[1].label),t.xp6(1),t.Q6J("src",e[0].url,t.LSH),t.uIk("alt",e[0].label),t.xp6(1),t.Q6J("ngIf",!s.isCourseFolder)}}function D(n,i){if(1&n&&(t.ynx(0),t.TgZ(1,"h2",3),t._uU(2),t.qZA(),t.YNc(3,Y,2,0,"h3",4),t.TgZ(4,"div",5),t.YNc(5,B,6,8,"ng-container",6),t.qZA(),t._UZ(6,"app-paginator",7),t.BQk()),2&n){const e=t.oxw();t.xp6(2),t.hij(" ",e.currentSession.title," "),t.xp6(1),t.Q6J("ngIf",e.isCourseFolder),t.xp6(2),t.Q6J("ngForOf",e.currentSession.beforeAterterPhotos),t.xp6(1),t.Q6J("previousSession",e.previousSession)("nextSession",e.nextSession)}}function M(n,i){1&n&&t._uU(0," Not found ")}class l{constructor(i,e,s){this.activateRoute=i,this.applicationStateService=e,this.googleAnalyticsService=s,this.mainWrapper=null,this.innerWidth=0,this.isCourseFolder=!1,this.destroy$=new A.x}ngOnInit(){this.mainWrapper=document.getElementById("main-wrapper"),this.mainWrapper&&(this.innerWidth=this.mainWrapper.clientWidth-2*parseInt(getComputedStyle(this.mainWrapper).paddingLeft)),this.activateRoute.paramMap.pipe((0,E.R)(this.destroy$)).subscribe(i=>{const e=i.get("id");if(!e)return;const s=this.applicationStateService.retouchSessions.findIndex(u=>u.transliteratedUrl===e);s<0||(this.currentSession=this.applicationStateService.retouchSessions[s],this.previousSession=this.applicationStateService.retouchSessions[s-1],this.nextSession=this.applicationStateService.retouchSessions[s+1],setTimeout(()=>{juxtapose.scanPage()}),this.isCourseFolder="course"===this.activateRoute.snapshot.params.id||!1)}),g(document,"sliderUpdated").pipe((0,Q.b)(200),(0,E.R)(this.destroy$)).subscribe(()=>{this.googleAnalyticsService.sendEvent(y.O.RETOUCH_SLIDER_TOUCHED)})}ngOnDestroy(){this.destroy$.next(),this.destroy$.unsubscribe()}static#t=this.\u0275fac=function(e){return new(e||l)(t.Y36(f.gz),t.Y36(b.V),t.Y36(y.$))};static#e=this.\u0275cmp=t.Xpm({type:l,selectors:[["app-retouch-session"]],decls:4,vars:2,consts:[["id","main-wrapper",1,"container"],[4,"ngIf","ngIfElse"],["notFound",""],[1,"detail-title"],["class","text-center mb-6 text-xs",4,"ngIf"],[1,"flex","flex-col","gap-4","mb-4"],[4,"ngFor","ngForOf"],[3,"previousSession","nextSession"],[1,"text-center","mb-6","text-xs"],[1,"juxtapose","m-auto",3,"ngStyle"],["loading","lazy","data-label","before",3,"src"],["loading","lazy","data-label","after",3,"src"],["class","text-[10px] text-center text-slate-600 mt-1",4,"ngIf"],[1,"text-[10px]","text-center","text-slate-600","mt-1"],[1,"normal-case","tracking-tight","mr-1"],[1,"normal-case"]],template:function(e,s){if(1&e&&(t.TgZ(0,"div",0),t.YNc(1,D,7,5,"ng-container",1),t.YNc(2,M,1,0,"ng-template",null,2,t.W1O),t.qZA()),2&e){const u=t.MAs(3);t.xp6(1),t.Q6J("ngIf",s.currentSession)("ngIfElse",u)}},dependencies:[c.sg,c.O5,c.PC,W.J,p],changeDetection:0})}const H=[{path:"",component:l}];class m{static#t=this.\u0275fac=function(e){return new(e||m)};static#e=this.\u0275mod=t.oAB({type:m});static#n=this.\u0275inj=t.cJS({imports:[f.Bz.forChild(H),f.Bz]})}var N=o(3732);class h{static#t=this.\u0275fac=function(e){return new(e||h)};static#e=this.\u0275mod=t.oAB({type:h});static#n=this.\u0275inj=t.cJS({imports:[c.ez,m,N.U]})}}}]);